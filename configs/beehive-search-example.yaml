# Beehive Search Service 配置文件示例
# 复制此文件为 beehive-search.yaml 并根据实际环境修改

# gRPC 服务配置
grpc:
  # 绑定地址
  bind-address: "0.0.0.0"
  # 绑定端口
  bind-port: 50054
  # 最大接收消息大小（字节）
  max-recv-msg-size: 4194304  # 4MB
  # 最大发送消息大小（字节）
  max-send-msg-size: 4194304  # 4MB

# Elasticsearch 配置
elasticsearch:
  # Elasticsearch 地址列表
  addresses:
    - http://localhost:9200
    # - http://es-node-2:9200
    # - http://es-node-3:9200
  
  # 索引名称
  index: beehive-messages
  
  # 连接超时（秒）
  timeout: 10
  
  # 最大重试次数
  max-retries: 3
  
  # 用户名（如果启用了安全认证）
  username: ""
  
  # 密码（如果启用了安全认证）
  password: ""
  
  # 是否启用 Sniff（自动发现节点）
  sniff: false

# 数据库配置（可选，用于获取消息详情）
database:
  # 主机地址
  host: localhost
  # 端口
  port: 5432
  # 用户名
  user: postgres
  # 密码
  password: postgres
  # 数据库名
  dbname: beehive
  # SSL 模式：disable, require, verify-ca, verify-full
  sslmode: disable
  # 最大空闲连接数
  max-idle-conns: 10
  # 最大打开连接数
  max-open-conns: 100
  # 连接最大生命周期（分钟）
  conn-max-lifetime: 60

# etcd 配置（服务注册与发现）
etcd:
  # etcd 端点列表
  endpoints:
    - localhost:2379
    # - localhost:23790
    # - localhost:23791
  
  # 拨号超时时间
  dial-timeout: 5s
  
  # 服务注册前缀
  prefix: "/beehive/services"
  
  # 租约 TTL（秒）
  lease-ttl: 10
  
  # 用户名（如果启用了认证）
  username: ""
  
  # 密码（如果启用了认证）
  password: ""

# 日志配置
log:
  # 日志级别：debug, info, warn, error
  level: info
  # 日志格式：json, text
  format: json
  # 日志输出路径，空字符串表示标准输出
  output-path: ""
  # 错误日志输出路径
  error-output-path: ""

# 服务配置
service:
  # 服务名称
  name: beehive-search
  # 服务版本
  version: "1.0.0"
  # 实例 ID（为空则自动生成）
  instance-id: ""
  # 元数据
  metadata:
    region: "us-east-1"
    zone: "us-east-1a"

# 性能配置
performance:
  # 搜索默认分页大小
  default-page-size: 20
  # 搜索最大分页大小
  max-page-size: 100
  # 搜索超时时间（秒）
  search-timeout: 30
  # 是否启用缓存
  enable-cache: false
  # 缓存过期时间（分钟）
  cache-ttl: 5

# 健康检查配置
health:
  # 健康检查端口
  port: 8080
  # 健康检查路径
  path: "/health"
  # 就绪检查路径
  ready-path: "/ready"
