syntax = "proto3";

package friend;
option go_package = "./friend";

// 好友服务
service FriendService {
    // 发送好友申请
    rpc SendFriendRequest(SendFriendRequestRequest) returns (SendFriendRequestResponse);
    
    // 处理好友申请
    rpc HandleFriendRequest(HandleFriendRequestRequest) returns (CommonResponse);
    
    // 获取好友申请列表
    rpc GetFriendRequests(GetFriendRequestsRequest) returns (FriendRequestsResponse);
    
    // 获取好友列表
    rpc GetFriends(GetFriendsRequest) returns (FriendsResponse);
    
    // 删除好友
    rpc DeleteFriend(DeleteFriendRequest) returns (CommonResponse);
    
    // 检查是否为好友
    rpc IsFriend(IsFriendRequest) returns (IsFriendResponse);
    
    // 更新好友备注
    rpc UpdateFriendRemark(UpdateFriendRemarkRequest) returns (CommonResponse);
}

// 发送好友申请请求
message SendFriendRequestRequest {
    int64 from_user_id = 1;
    int64 to_user_id = 2;
    string message = 3;
}

// 发送好友申请响应
message SendFriendRequestResponse {
    int64 request_id = 1;
}

// 处理好友申请请求
message HandleFriendRequestRequest {
    int64 request_id = 1;
    int64 user_id = 2;
    bool accept = 3;
}

// 获取好友申请列表请求
message GetFriendRequestsRequest {
    int64 user_id = 1;
}

// 好友申请列表响应
message FriendRequestsResponse {
    repeated FriendRequestInfo requests = 1;
}

// 好友申请信息
message FriendRequestInfo {
    int64 request_id = 1;
    int64 from_user_id = 2;
    int64 to_user_id = 3;
    string message = 4;
    int32 status = 5;
    int64 created_at = 6;
}

// 获取好友列表请求
message GetFriendsRequest {
    int64 user_id = 1;
}

// 好友列表响应
message FriendsResponse {
    repeated FriendInfo friends = 1;
}

// 好友信息
message FriendInfo {
    int64 user_id = 1;
    int64 friend_id = 2;
    string remark = 3;
    int64 created_at = 4;
}

// 删除好友请求
message DeleteFriendRequest {
    int64 user_id = 1;
    int64 friend_id = 2;
}

// 检查是否为好友请求
message IsFriendRequest {
    int64 user_id = 1;
    int64 friend_id = 2;
}

// 检查是否为好友响应
message IsFriendResponse {
    bool is_friend = 1;
}

// 更新好友备注请求
message UpdateFriendRemarkRequest {
    int64 user_id = 1;
    int64 friend_id = 2;
    string remark = 3;
}

// 通用响应
message CommonResponse {
    bool success = 1;
    string message = 2;
}
